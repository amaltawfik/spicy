% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cross_tab.R
\name{cross_tab}
\alias{cross_tab}
\title{Cross-tabulation (SPSS-like)}
\usage{
cross_tab(
  data,
  x,
  y = NULL,
  by = NULL,
  weights = NULL,
  rescale = FALSE,
  percent = c("none", "column", "row"),
  include_stats = TRUE,
  simulate_p = FALSE,
  simulate_B = 2000,
  digits = NULL,
  styled = TRUE,
  show_n = TRUE
)
}
\arguments{
\item{data}{A data frame.}

\item{x}{Row variable (unquoted).}

\item{y}{Column variable (unquoted, optional).}

\item{by}{Optional grouping variable or expression (e.g. \code{interaction(vs, am)}).}

\item{weights}{Optional numeric weights.}

\item{rescale}{Logical. If TRUE, rescales weights so total weighted N matches raw N.
Equivalent to SPSS option \emph{“Rescale weights to sample size”}.}

\item{percent}{One of \code{"none"}, \code{"row"}, \code{"column"}.}

\item{include_stats}{Logical; compute Chi² and Cramer’s V (default TRUE).}

\item{simulate_p}{Logical; use Monte Carlo p-value simulation (default FALSE).}

\item{simulate_B}{Integer; number of replicates for Monte Carlo (default 2000).}

\item{digits}{Number of decimals (default 1 for percentages, 0 for counts).}

\item{styled}{Logical; if TRUE, returns a "spicy_cross_table" object (for printing).}

\item{show_n}{Logical; if TRUE, adds marginal N totals when percent != "none".}
}
\value{
A \code{data.frame}, list of data.frames, or \code{spicy_cross_table} object.
When \code{by} is used, returns a \code{spicy_cross_table_list}.
}
\description{
Computes a cross-tabulation with optional weights, grouping, and percentages.
Produces an SPSS-like table structure with intelligent defaults, robust Chi²
diagnostics, and modern ASCII formatting.
}
\section{Global Options}{


The function recognizes the following global options that modify its default behavior:
\itemize{
\item \strong{\code{options(spicy.simulate_p = TRUE)}}
Enables Monte Carlo simulation for all Chi² tests by default.
Equivalent to setting \code{simulate_p = TRUE} in every call.
\item \strong{\code{options(spicy.rescale = TRUE)}}
Automatically rescales weights so that total weighted N equals the raw N,
mimicking SPSS option \emph{“Rescale weights to sample size”}.
Equivalent to setting \code{rescale = TRUE} in each call.
}

These options are convenient for users who wish to enforce consistent behavior
across multiple calls to \code{cross_tab()} and other spicy table functions.
They can be disabled by setting them to \code{NULL}:
\code{options(spicy.simulate_p = NULL, spicy.rescale = NULL)}.

Example:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{options(spicy.simulate_p = TRUE, spicy.rescale = TRUE)
cross_tab(mtcars, cyl, gear, weights = mtcars$mpg)
}\if{html}{\out{</div>}}
}

\examples{
# Basic crosstab
cross_tab(mtcars, cyl, gear)

# Weighted (rescaled)
cross_tab(mtcars, cyl, gear, weights = mtcars$mpg, rescale = TRUE)

# Grouped
cross_tab(mtcars, cyl, gear, by = am)

# Grouped by an interaction
cross_tab(mtcars, cyl, gear, by = interaction(vs, am))

}
